# token-overlay-services

Topic Manager and Lookup Service for token overlays

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [ProtoMapLookupService](#protomaplookupservice)
    *   [Parameters](#parameters)
    *   [outputAdded](#outputadded)
        *   [Parameters](#parameters-1)
    *   [outputSpent](#outputspent)
        *   [Parameters](#parameters-2)
    *   [lookup](#lookup)
        *   [Parameters](#parameters-3)
*   [ProtoMapTopicManager](#protomaptopicmanager)
    *   [identifyAdmissibleOutputs](#identifyadmissibleoutputs)
        *   [Parameters](#parameters-4)

### ProtoMapLookupService

Implements a lookup service for ProtoMap name registry

#### Parameters

*   `storageEngine` &#x20;

#### outputAdded

Notifies the lookup service of a new output added.

##### Parameters

*   `params` **{txid: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), vout: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), outputScript: any, topic: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)}**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>**&#x20;

#### outputSpent

Deletes the output record once the UTXO has been spent

##### Parameters

*   `params` **{txid: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), vout: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), topic: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)}**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>**&#x20;

#### lookup

Queries the lookup service for particular UTXOs

##### Parameters

*   `params` **{query: ProtoMapLookupQuery}**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)\<LookupResult>>**&#x20;

### ProtoMapTopicManager

Implements a topic manager for ProtoMap name registry

#### identifyAdmissibleOutputs

Returns the outputs from the ProtoMap transaction that are admissible.

##### Parameters

*   `$0` **{previousUTXOs: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)\<Output>, parsedTransaction: Transaction}**&#x20;

    *   `$0.previousUTXOs` &#x20;
    *   `$0.parsedTransaction` &#x20;
*   `object`  all params given in an object
*   `previousUTXOs`  any previous UTXOs
*   `parsedTransaction`  transaction containing outputs to admit into the current topic

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)> | AdmissableOutputs)>**&#x20;

## License

The license for the code in this repository is the Open BSV License.